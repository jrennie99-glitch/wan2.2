{% extends "base.html" %}
{% block title %}Gallery - WAN 2.2 Dream Studio{% endblock %}

{% block content %}
<h2 style="margin-bottom: 8px;">üñºÔ∏è Gallery</h2>
<p style="color: var(--text-muted); margin-bottom: 24px;">Browse your completed video generations</p>

{% if jobs %}
<div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px;">
{% for job in jobs %}
<div class="card" style="padding: 0; overflow: hidden;">
    <div style="position: relative; background: #000; aspect-ratio: 16/9;">
        {% if job.video_url %}
        <video src="{{ job.video_url }}" style="width: 100%; height: 100%; object-fit: cover;" muted loop onmouseover="this.play()" onmouseout="this.pause(); this.currentTime=0;"></video>
        {% else %}
        <div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; color: var(--text-muted);">No preview</div>
        {% endif %}
    </div>
    <div style="padding: 16px;">
        <p style="font-size: 14px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-bottom: 8px;">{{ job.prompt[:80] }}{% if job.prompt|length > 80 %}...{% endif %}</p>
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <span style="font-size: 12px; color: var(--text-muted);">{{ job.created_at[:10] }}</span>
            <a href="/job/{{ job.job_id }}" class="btn" style="padding: 8px 16px; font-size: 14px;">View</a>
        </div>
    </div>
</div>
{% endfor %}
</div>
{% else %}
<div class="card">
    <div class="empty-state">
        <p>No completed videos yet.</p>
        <a href="/" class="btn" style="margin-top: 16px;">Create Your First Video</a>
    </div>
</div>
{% endif %}
{% endblock %}